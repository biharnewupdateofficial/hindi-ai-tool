<!DOCTYPE html>
<html>
<head>
    <title>OpenTutor AI</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<h2>ðŸ¤– OpenTutor AI</h2>

<div id="chat-box">
{% for msg in chat %}
<div class="{{ 'user' if msg.role=='user' else 'ai' }}">{{ msg.text }}</div>
{% endfor %}
</div>

<textarea id="question" placeholder="Apna sawal likhiye..."></textarea>
<button onclick="sendMessage()">Send</button>
<button onclick="clearChat()">New Chat</button>
<button onclick="generateImage()">ðŸ–¼ Image Banao</button>

<script>
function generateImage(){
    let prompt = document.getElementById("question").value;

    fetch("/image",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({prompt:prompt})
    })
    .then(res=>res.json())
    .then(data=>{
        if(data.image_url){
            let img = document.createElement("img");
            img.src = data.image_url;
            img.style.maxWidth = "100%";
            document.getElementById("chat-box").appendChild(img);
        }
    });
}
</script>

<hr>

<h3>ðŸ“„ PDF Upload</h3>
<input type="file" id="pdf">
<button onclick="uploadPDF()">Upload & Summarize</button>

<script src="/static/app.js"></script>
</body>
</html>
